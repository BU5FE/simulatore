<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulatore di Risparmio Energetico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>Simulatore di Risparmio<br>Luce e Gas</h1>
        <form id="calculator-form">
            
            <label for="clientName">Nome Cliente</label>
            <input type="text" id="clientName" name="clientName" required>
            <label for="billingFrequency">Frequenza di Fatturazione Attuale</label>
            <select id="billingFrequency" name="billingFrequency">
                <option value="monthly">Attuale Fattura Mensile</option>
                <option value="bimonthly">Attuale Fattura Bimestrale</option>
            </select>
            
            <div id="billingNote" style="display:none; color: #d32f2f; margin-top: -10px; margin-bottom: 20px; font-size: 0.9em; text-align: left;">
                Ricordati: la fatturazione con la nuova offerta sara' mensile
            </div>
            <div id="data-m1-fields">
                <label for="monthSelection1">Mese di Riferimento</label>
                <select id="monthSelection1" name="monthSelection1">
                    <option value="2025-01">Gennaio 2025</option>
                    <option value="2025-02">Febbraio 2025</option>
                    <option value="2025-03">Marzo 2025</option>
                    <option value="2025-04">Aprile 2025</option>
                    <option value="2025-05">Maggio 2025</option>
                    <option value="2025-06">Giugno 2025</option>
                    <option value="2025-07">Luglio 2025</option>
                    <option value="2025-08">Agosto 2025</option>
                    <option value="2025-09">Settembre 2025</option>
<option value="2025-10">Ottobre 2025</option> 
<option value="2025-11">Novembre 2025</option>
                    <option value="2025-12">Dicembre 2025</option>
</select>


                <label for="userType">Scelta tra Consumer e Business</label>
                <select id="userType" name="userType">
                    <option value="consumer">Consumer (domestico)</option>
                    <option value="business">Business (aziendale)</option>
                </select>
                
                <label for="utilityType">Scelta del tipo di fornitura</label>
                <select id="utilityType" name="utilityType">
                    <option value="light">Luce</option>
                    <option value="gas">Gas</option>
                    <option value="lightAndGas">Luce e Gas</option>
                </select>
                
                <div id="light-fields-m1">
                    <hr style="border-top: 1px solid #c8e6c9;">
                    
                    <label for="consumptionType1">Tipologia Consumo Luce <span id="monthNameConsumptionType1">Mese di Riferimento</span></label>
                    <select id="consumptionType1" name="consumptionType1">
                        <option value="monorario">Monorario</option>
                        <option value="fasce">A Fasce (F1, F2, F3)</option>
                    </select>

                    <div id="light-monorario-fields-m1">
                        <label for="currentConsumptionLight1">Consumo Luce Totale <span id="monthNameLightCons1">Mese di Riferimento</span> (kWh)</label>
                        <input type="number" id="currentConsumptionLight1" name="currentConsumptionLight1">
                    </div>

                    <div id="light-fasce-fields-m1" style="display:none;">
                        <label for="currentConsumptionF1_1">Consumo Luce F1 <span id="monthNameLightConsF1_1">Mese di Riferimento</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF1_1" name="currentConsumptionF1_1">
                        <label for="currentConsumptionF2_1">Consumo Luce F2 <span id="monthNameLightConsF2_1">Mese di Riferimento</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF2_1" name="currentConsumptionF2_1">
                        <label for="currentConsumptionF3_1">Consumo Luce F3 <span id="monthNameLightConsF3_1">Mese di Riferimento</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF3_1" name="currentConsumptionF3_1">
                    </div>

                    <label for="annualConsumptionLight">Consumo Luce annuale in base allo storico della fattura (kWh)</label>
                    <input type="number" id="annualConsumptionLight" name="annualConsumptionLight">
                    
                    <label for="currentPriceLight1">Spesa per la materia luce <span id="monthNameLightPrice1">Mese di Riferimento</span> (Euro)</label>
                    <input type="number" id="currentPriceLight1" name="currentPriceLight1" step="0.01">

                    <div id="pcv-light-m1-container">
                        <label for="currentPCVLight1">Attuale PCV / Costo Fisso Mensile Luce (Euro)</label>
                        <input type="number" id="currentPCVLight1" name="currentPCVLight1" step="0.01">
                    </div>
                </div>
                <div id="gas-fields-m1" style="display:none;">
                    <hr style="border-top: 1px solid #c8e6c9;">
                    <label for="currentConsumptionGas1">Consumo Gas <span id="monthNameGasCons1">Mese di Riferimento</span> (smc)</label>
                    <input type="number" id="currentConsumptionGas1" name="currentConsumptionGas1">
                    
                    <label for="annualConsumptionGas">Consumo Gas annuale in base allo storico della fattura (smc)</label>
                    <input type="number" id="annualConsumptionGas" name="annualConsumptionGas">

                    <label for="currentPriceGas1">Spesa per la materia gas <span id="monthNameGasPrice1">Mese di Riferimento</span> (Euro)</label>
                    <input type="number" id="currentPriceGas1" name="currentPriceGas1" step="0.01">

                    <div id="pcv-gas-m1-container">
                        <label for="currentPCVGas1">Attuale PCV / Costo Fisso Mensile Gas (Euro)</label>
                        <input type="number" id="currentPCVGas1" name="currentPCVGas1" step="0.01">
                    </div>
                </div>
            </div>

            <div id="data-m2-fields" style="display:none;">
                <hr style="border-top: 2px solid #4caf50; margin: 20px 0;">
                <label for="monthSelection2">Mese di Riferimento 2</label>
                <select id="monthSelection2" name="monthSelection2">
                    </select>

                <div id="light-fields-m2" style="display:none;">
                    <hr style="border-top: 1px solid #c8e6c9;">
                    
                    <label for="consumptionType2">Tipologia Consumo Luce <span id="monthNameConsumptionType2">Mese di Riferimento 2</span></label>
                    <select id="consumptionType2" name="consumptionType2">
                        <option value="monorario">Monorario</option>
                        <option value="fasce">A Fasce (F1, F2, F3)</option>
                    </select>
                    
                    <div id="light-monorario-fields-m2">
                        <label for="currentConsumptionLight2">Consumo Luce Totale <span id="monthNameLightCons2">Mese di Riferimento 2</span> (kWh)</label>
                        <input type="number" id="currentConsumptionLight2" name="currentConsumptionLight2">
                    </div>

                    <div id="light-fasce-fields-m2" style="display:none;">
                        <label for="currentConsumptionF1_2">Consumo Luce F1 <span id="monthNameLightConsF1_2">Mese di Riferimento 2</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF1_2" name="currentConsumptionF1_2">
                        <label for="currentConsumptionF2_2">Consumo Luce F2 <span id="monthNameLightConsF2_2">Mese di Riferimento 2</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF2_2" name="currentConsumptionF2_2">
                        <label for="currentConsumptionF3_2">Consumo Luce F3 <span id="monthNameLightConsF3_2">Mese di Riferimento 2</span> (kWh)</label>
                        <input type="number" id="currentConsumptionF3_2" name="currentConsumptionF3_2">
                    </div>
                    
                    <div id="price-light-m2-container">
                        <label for="currentPriceLight2">Spesa per la materia luce <span id="monthNameLightPrice2">Mese di Riferimento 2</span> (Euro)</label>
                        <input type="number" id="currentPriceLight2" name="currentPriceLight2" step="0.01">
                    </div>
                </div>
                <div id="gas-fields-m2" style="display:none;">
                    <hr style="border-top: 1px solid #c8e6c9;">
                    <label for="currentConsumptionGas2">Consumo Gas <span id="monthNameGasCons2">Mese di Riferimento 2</span> (smc)</label>
                    <input type="number" id="currentConsumptionGas2" name="currentConsumptionGas2">

                    <div id="price-gas-m2-container">
                        <label for="currentPriceGas2">Spesa per la materia gas <span id="monthNameGasPrice2">Mese di Riferimento 2</span> (Euro)</label>
                        <input type="number" id="currentPriceGas2" name="currentPriceGas2" step="0.01">
                    </div>
                </div>
            </div>
            <label for="selectedOffer">Scelta della nuova offerta</label>
            <select id="selectedOffer" name="selectedOffer">
                <option value="ultraGreenCasa">UltraGreen Casa</option>
                <option value="ultraGreenFix">UltraGreen Fix</option>
                <option value="ultraGreenPMI">UltraGreen PMI</option>
                <option value="ultraGreenGrandiAziende">UltraGreen Grandi Aziende</option>
                <option value="revolutionTax">Revolution Tax</option>
            </select>

            <button type="submit">Calcola il tuo risparmio</button>
        </form>

        <div id="result">
        </div>

        <div id="export-actions" style="margin-top: 20px; display: none;">
            <button id="exportPdfBtn" type="button" class="export-button">Esporta PDF</button>
            <button id="exportImgBtn" type="button" class="export-button">Esporta Immagine</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>

</html>

